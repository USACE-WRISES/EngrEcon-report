--- 
title: "EngrEcon R-package"
author: "Liya Abera and S. Kyle McKay"
date: "February 2023"
output:
  html_document: default
  word_document: default
description: The U.S. Army Engineer Research and Development Center (ERDC) has developed
  an R-package for conducting standard engineering economics methods and computing
  life cycle cost analysis. This report documents the development of this tool, including
  information on model scoping, the development process, and error-checking.
github-repo: USACE-WRISES/LifeCycleCost-report
---

# Front Matter {-}

<span style="color: red;">DRAFT REPORT UNDERGOING REVIEW AND USACE CERTIFICATION</span>

The final, reviewed report can be downloaded here. (<span style="color: red;">ADD LINK LATER</span>)

The R-package may be downloaded here. (<span style="color: red;">ADD LINK LATER</span>)

Points of Contact:

Liya Abera, Ph.D. 
liya.eshetu.abera at gmail.com
Environmental Laboratory  
Oxford, MS 38677

S. Kyle McKay, Ph.D., P.E.  
kyle.mckay at usace.army.mil  
Phone: 970-980-9747  
Environmental Laboratory  
New York, NY 10278


```{r, echo=FALSE, include=FALSE}
#Markdown options
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message = FALSE) 

##########
#Load all necessary R packages
#library(devtools)
#install_github("USACE-WRISES/LifeCycleCost-package") #Loads the R-package presented here
```

# ABSTRACT

Insert.


# INTRODUCTION

Engineering economics evaluates the costs of services, products, and systems. In engineering projects, the physical and cost feasibilities must be considered. A project's cost-effectiveness or economic efficiency can be evaluated by performing a cost analysis. A cost analysis considers all of the costs, which are direct and indirect, related to the project. Direct costs include labor and material costs, and indirect costs include planning, design, and administrative costs. The overall project costs can be classified as (1) Initial cost, which is the capital cost of the project, (2) annual cost, which is the operation cost or any other costs that occur yearly; and (3) future cost, which includes maintenance or rehabilitation cost. These costs occur at different times of a project year. In order to pick the cost-efficient option from different project alternatives, converting the costs to the same time is essential. 

An R-package is developed to provide a convenient way of performing engineering cost analyses. Several sets of engineering cost analysis functions are included in the package. The functions can be used to convert single payments or equivalent payments to the equivalent cost.  
To perform cost analyses understanding the cash flow is essential. The cash flow tells us the sum of money recorded as an expense or gain in a project's lifetime. The timing of cash flows over the project's life is a crucial factor of cost analysis. The functions included in this package were developed based on the basic engineering economic equations (Newnan et al., 2020).

# METHODS

Discount factors are used to compute the equivalent costs that occurred at different cash flow points. The R functions are developed for single, uniform series, and uniform gradient payments. List of symbols used in the R-package: 

- _A_: annual equivalent value.  
- _F_: future value.  
- _G_: uniform gradient equivalent.  
- _i_: discount rate in percent per year (decimal format).  
- _idc_: interest during construction.  
- _n_: project life span and/or economic planning horizon in years.  
- _P_: present value.  


```{r, echo=FALSE, fig.cap="Figure 1. Engineering economics cash flow diagrams."}
knitr::include_graphics("ZZ_EngrEconCashFlow.png")
```


## Single Payment Functions

`present.to.future`: This function computes the equivalent future value (fr.value) of any present value (pv.value) at a point of a cash flow. 

$F = P(1+i)^n$

`future.to.present`: This function combine future single payment or cost to present value. 

$P = \frac{F}{(1+i)^n}$


## Uniform Series Payment

`annual.to.future`: determines the future value from the annual equivalent payment series or income that start at the end of the first year and continue for the life span of a project. The cash flow repeats at the end of each year without changing the amount. 

$F = A \frac{(1+i)^n-1}{i}$


`annual.to.present`: determines the present value or cost from a series of annual values/costs that starts at the end of the first year and continues for the life span of a project. 

$F = A \frac{(1+i)^n-1}{i(1+i)^n}$


`future.to.annual`: determines the future value after n periods of an annuity. 

$A = F \frac{i}{(1+i)^n-1}$


`present.to.annual`: a comparison of alternatives based on their present value is misleading when the lifespan of the alternative value is different. The capital recovery factor converts each alternative's present value to an equivalent annual. The present.to.annual function can be used to make this conversion and comparison. 

$A = P \frac{i(1+i)^n}{(1+i)^n-1}$


## Uniform Gradient Payment

Gradient payment is a payment that either increases or decreases by a constant amount. The cash flow changes in each period by the same amount, called gradient (_G_).

`gradient.to.present`: calculates the present worth of a cash flow increasing or decreasing by a uniform amount. 

$P = G (\frac{(1+i)^n-1}{i^2(1+i)^n} - \frac{n}{i(1+i)^n})$


`gradient.to.future`: calculates the future worth of a cash flow increasing or decreasing by a uniform amount. 

$F = G (\frac{(1+i)^n-1}{i^2} - \frac{n}{i})$


`gradient.to.annual`: calculates the future worth of a cash flow that is increasing or decreasing by a uniform amount. 

$A = G (\frac{1}{i} - \frac{n}{(1+i)^n-1})$


When working in gradient cash flow, one important point that needs consideration is defining the sign (- or +) for cash flow. For instance: if we define the expense as positive and the revenue as negative when the gradient is increasing, the sign is positive, and if the gradient is decreasing, the sign is negative.


## Effective Annual Interest Rate

The interest rate used in the discount factor formulas is the interest rate per period. The effective annual interest rate is the annual rate that considers the effect of compounding. 

$i_e = (1 + \frac{r}{m})^m - 1 = (1+i)^m - 1$


Where $i_e$ is effective annual interest rate, $i$ is effective interest rate per compound period $(r/m)$, $m$ is number of compounding period per year, and $r$ is nominal interest rate per year.

_Example_: An investment was made at $50,000 with a 6% interest rate compounded quarterly. How much is the effective annual interest? How much money would be in the account at the end of the first year?

The function effective_i can be used to calculate the effective annual interest:

```{r echo=TRUE}
#effective_i(0.06, m = "yearly")
```

The present.to.future can be used to calculate the amount of money based on the calculated effective interest rate.

```{r echo=TRUE}
#present.to.future(0.061, 1, 50000)
```


## Interest During Construction

`interest.during.construction`: determines interest during construction (IDC) based on the interest rate, duration, and capital investment. IDC is not a financial cost for which no one will be required to pay (Engineer & Resources, 1993). 


<span style="color: red;">Add equations for IDC.</span>

_Example_: A project's first cost is $ 800,000, the interest rate is 2.75%, and the duration of construction is 24 months. What is the interest during construction for this project?


`gradient.to.annual(i,duration,capital)` calculates the present value of the benefit. 

```{r echo=TRUE}
#interest.during.construction(0.0275, 24, 800000)
```


# APPLICATIONS

Insert.


# Acknowledgements {-}

Model development was funded by the U.S. Army Corps of Engineers' Engineering with Nature program ([EWN](https://ewn.erdc.dren.mil/)). Specifically, this project was developed under the Network for Engineering with Nature ([NEWN](https://n-ewn.org/)). The authors are grateful to the EWN and NEWN teams for their generous contributions to the scope of this effort. The authors are also grateful for USACE Economics reviewers. Opinions expressed here are those of the authors and not necessarily those of the agencies they represent.


# References {-}

National Development Costs. U.S. Army Corps of Engineers Humphreys Engineer Center Support Activity Institute for Water Resources, DACWC72-90(June).

Newnan, D. G., Eschenbach, T. G., Lavelle, J. P., & Oxford, N. Y. (2020). Engineering Economic Analysis (14th ed.). New York, Oxford University Press.


# Glossary and Acronymns {-}

- _A_: annual equivalent value.  
- _F_: future value.  
- _G_: uniform gradient equivalent.  
- _[ERDC](https://www.erdc.usace.army.mil/)_: U.S. Army Engineer Research and Development Center.  
- _[EWN](https://ewn.erdc.dren.mil/)_: Engineering with Nature.  
- _i_: discount rate in percent per year (decimal format).  
- _idc_: interest during construction.  
- _n_: project life span and/or economic planning horizon in years.  
- _[NEWN](https://n-ewn.org/)_: Network for Engineering with Nature.  
- _P_: present value.  
- _[USACE](https://www.usace.army.mil/)_: U.S. Army Corps of Engineers.  


